(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{7166:function(e,n){var t;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];if(t){var o=typeof t;if("string"===o||"number"===o)e.push(this&&this[t]||t);else if(Array.isArray(t))e.push(i.apply(this,t));else if("object"===o)for(var a in t)r.call(t,a)&&t[a]&&e.push(this&&this[a]||a)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(t=function(){return i}.apply(n,[]))||(e.exports=t)}()},720:function(e,n,t){"use strict";var r=t(1802),i=t.n(r),o=t(7166),a=t.n(o),s=t(5893),c=a().bind(i());n.Z=function(e){return(0,s.jsx)("div",{className:c("contents"),children:e.children})}},9374:function(e,n,t){"use strict";var r=t(5893);n.Z=function(e){return(0,r.jsx)("div",{className:"layout",children:e.children})}},6774:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var r,i=t(5861),o=t(7757),a=t.n(o),s=t(720),c=t(9374),u=t(7294),m=t(2982),h=Object.freeze({x:0,y:0}),l=Object.freeze({w:0,h:0});!function(e){e.e="e",e.w="w",e.s="s",e.n="n",e.se="se",e.sw="sw",e.ne="ne",e.nw="nw"}(r||(r={}));var d=["e","w","s","n"],p=(0,m.Z)(Object.keys(r));function x(e,n,t){return Math.min(Math.max(e,n),t)}var f=t(4760),w=t.n(f),v=t(7166),_=t.n(v),g=t(5893),y=_().bind(w()),C=function(e){var n=e.imgSize,t=e.setOffset,r=e.setCropBoxSize,i=function(){return console.log((window.innerHeight-666)/2+106+(560-n.h)/2),(window.innerHeight-666)/2+106+(560-n.h)/2},o=function(){return(window.innerWidth-n.w)/2};return(0,g.jsx)("div",{className:y("dimmedBox"),onMouseDown:function(e){e.preventDefault();var a=e.clientX,s=e.clientY,c=function(e){t({x:a-o(),y:s-i()}),r({w:0,h:0});var c=e.clientX-a,u=e.clientY-s,m=a-o(),h=s-i(),l=(c<0?e.clientX:a)-o(),d=(u<0?e.clientY:s)-i(),p=c<0?m:n.w-m,f=u<0?h:n.h-h,w=x(Math.abs(c),0,p),v=x(Math.abs(u),0,f);t({x:Math.max(l,0),y:Math.max(d,0)}),r({w:w,h:v})};document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)}))},style:{width:"".concat(n.w,"px"),height:"".concat(n.h,"px")}})},b=_().bind(w());var j=function(e){var n=e.imgSrc,t=e.imgSize,r=e.offset,i=e.setOffset,o=e.cropBoxSize,a=e.setCropBoxSize,s=(0,u.useRef)(h),c=function(e){var n,r,a=s.current,c={x:e.clientX,y:e.clientY},u={x:(n=c).x-(r=a).x,y:n.y-r.y};s.current=c,i((function(e){return function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=e.x+n.x,s=e.y+n.y;return{x:x(a,t,i),y:x(s,r,o)}}(e,u,0,0,t.w-o.w,t.h-o.h)}))},m=function e(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)},l=function(e,n){e.preventDefault();var s=r.x+o.w,c=r.x,u=r.y+o.h,m=r.y,h=function(e){var n=e.clientX,r=e.clientY;l({x:x(n-(window.innerWidth-t.w)/2,0,t.w),y:x(r-((window.innerHeight-666)/2+106+(560-t.h)/2),0,t.h)})},l=function(e){var t=!(c+o.w>e.x),h=s-o.w>e.x,l=!(m+o.h>e.y),d=u-o.h>e.y,p=s-o.w-(r.x-e.x),x=c-(r.x-e.x),f=u-o.h-(r.y-e.y),w=m-(r.y-e.y),v=s-o.w-e.x,_=e.x-c-o.w,g=u-o.h-e.y,y=e.y-m-o.h,C=o.w+e.x-s,b=o.w+c-e.x,j=o.h+e.y-u,N=o.h+m-e.y;switch(n){case"e":h?(i({x:p,y:r.y}),a({w:v,h:o.h})):a({w:C,h:o.h});break;case"w":t?a({w:_,h:o.h}):(i({x:x,y:r.y}),a({w:b,h:o.h}));break;case"s":d?(i({x:r.x,y:f}),a({w:o.w,h:g})):a({w:o.w,h:j});break;case"n":l?a({w:o.w,h:y}):(i({x:r.x,y:w}),a({w:o.w,h:N}));break;case"se":d&&h?(i({x:p,y:f}),a({w:v,h:g})):h?(i({x:p,y:r.y}),a({w:v,h:j})):d?(i({x:r.x,y:f}),a({w:C,h:g})):a({w:C,h:j});break;case"sw":d&&t?(i({x:r.x+o.w,y:w}),a({w:_,h:g})):t?a({w:_,h:j}):d?(i({x:x,y:w}),a({w:b,h:g})):(i({x:x,y:r.y}),a({w:b,h:j}));break;case"ne":l&&h?(i({x:p,y:r.y+o.h}),a({w:v,h:y})):h?(i({x:p,y:w}),a({w:v,h:N})):l?a({w:C,h:y}):(i({x:r.x,y:w}),a({w:C,h:N}));break;case"nw":l&&t?a({w:_,h:y}):t?(i({x:r.x+o.w,y:w}),a({w:_,h:N})):l?(i({x:x,y:r.y+o.h}),a({w:b,h:y})):(i({x:x,y:w}),a({w:b,h:N}))}};document.addEventListener("mousemove",h),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",e)}))};return(0,g.jsxs)("div",{className:b("cropBox"),style:{width:"".concat(o.w,"px"),height:"".concat(o.h,"px"),transform:"translateX(".concat(r.x,"px) translateY(").concat(r.y,"px)")},children:[(0,g.jsx)("span",{className:b("viewBox"),children:(0,g.jsx)("img",{className:b("viewImg"),src:n,alt:"img",style:{width:"".concat(t.w,"px"),height:"".concat(t.h,"px"),transform:"translateX(-".concat(r.x,"px) translateY(-").concat(r.y,"px)")}})}),["w","h"].map((function(e){return(0,g.jsx)("span",{className:b("dash",e)},e)})),(0,g.jsx)("span",{className:b("cross")}),(0,g.jsx)("span",{className:b("moveBox"),onMouseDown:function(e){e.preventDefault(),document.addEventListener("mousemove",c),document.addEventListener("mouseup",m),s.current={x:e.clientX,y:e.clientY}}}),d.map((function(e){return(0,g.jsx)("span",{className:b("line",e),onMouseDown:function(n){return l(n,e)}},e)})),p.map((function(e){return(0,g.jsx)("span",{className:b("point",e),onMouseDown:function(n){return l(n,e)}},e)})),(0,g.jsx)("span",{className:b("cropBoxInfo"),children:"\ub4dc\ub798\uadf8\ud558\uc5ec \uc704\uce58\ub97c \uc870\uc815\ud574\uc8fc\uc138\uc694"})]})},N=_().bind(w()),S=function(e){var n=e.imgSrc,t=e.imgName,r=e.width,i=e.height,o=e.onClick,a=e.onClose,s=(0,u.useRef)(null),c=(0,u.useRef)(null),m=(0,u.useState)(l),d=m[0],p=m[1],x=(0,u.useState)(l),f=x[0],w=x[1],v=(0,u.useState)(h),_=v[0],y=v[1],b=(0,u.useState)(1),S=b[0],A=b[1],E=(0,u.useState)(1),k=E[0],B=E[1];(0,u.useEffect)((function(){L()}),[n]);var L=function(){var e=new Image;e.src=n,e.onload=function(){var n=function(e,n){return e>r&&n>i?i>r?r:Math.min(e*(i/n),r):n>i?Math.min(e,r)*(i/n):Math.min(e,r)}(e.width,e.height),t=function(e,n){return e>r&&n>i?i<r?i:Math.min(n*(r/e),i):e>r?Math.min(n,i)*(r/e):Math.min(n,i)}(e.width,e.height);A(n/e.width),B(t/e.height),p({w:n,h:t}),w({w:n/2,h:t/2}),y({x:n/4,y:t/4})}};return n?(0,g.jsxs)("div",{className:N("imageCropModal"),children:[(0,g.jsxs)("div",{className:N("titleArea"),children:[(0,g.jsx)("strong",{className:N("title"),children:"\uc0ac\uc9c4 \uc218\uc815"}),(0,g.jsxs)("div",{className:N("btnArea"),children:[(0,g.jsx)("a",{className:N("btn","close"),role:"button",onClick:a,children:"\ucde8\uc18c"}),(0,g.jsx)("a",{className:N("btn","save"),role:"button",onClick:function(){var e=document.createElement("canvas"),r=e.getContext("2d"),i=new Image;e.width=f.w,e.height=f.h,i.src=n,i.crossOrigin="anonymous",i.onload=function(){var n=document.createElement("canvas"),s=n.getContext("2d");n.width=i.width*S,n.height=i.height*k,null===s||void 0===s||s.drawImage(i,0,0,n.width,n.height),null===r||void 0===r||r.drawImage(n,_.x,_.y,f.w,f.h,0,0,f.w,f.h);var c=function(e){for(var n=atob(e.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));return new File([new Blob([new Uint8Array(r)],{type:"image/png"})],t)}(e.toDataURL());o(c),a()}},children:"\uc800\uc7a5"})]})]}),(0,g.jsx)("div",{className:N("imageArea"),children:(0,g.jsx)("div",{ref:s,className:N("wrap"),style:{width:"".concat(r,"px"),height:"".concat(i,"px")},children:(0,g.jsxs)("div",{ref:c,className:N("cropArea"),style:{width:"".concat(d.w,"px"),height:"".concat(d.h,"px")},children:[(0,g.jsx)("div",{className:N("imgArea"),children:(0,g.jsx)("div",{className:N("imgBox"),children:(0,g.jsx)("img",{className:N("img"),src:n,style:{width:"".concat(d.w,"px"),height:"".concat(d.h,"px")}})})}),(0,g.jsx)(C,{imgSize:d,setOffset:y,setCropBoxSize:w}),(0,g.jsx)(j,{imgSrc:n,imgSize:d,offset:_,setOffset:y,cropBoxSize:f,setCropBoxSize:w})]})})})]}):null},A=t(3935),E=function(e){var n=e.children,t=e.selector,r=(0,u.useRef)(),i=(0,u.useState)(!1),o=i[0],a=i[1];return(0,u.useEffect)((function(){r.current=document.querySelector(t),a(!0)}),[t]),o?(0,A.createPortal)(n,r.current):null},k=t(5369),B=t.n(k),L=function(e){var n=window.innerWidth-document.body.clientWidth;e&&0!==n?(document.body.style.overflow="hidden",document.body.style.marginRight="".concat(n,"px")):(document.body.style.overflow="inherit",document.body.style.marginRight="0px")},M=_().bind(B()),O=function(e){var n=e.visible,t=e.dimmed,r=void 0===t||t,i=e.children,o=e.onClickBg;(0,u.useEffect)((function(){return L(!!n),function(){L(!1)}}),[n]);return(0,g.jsx)(g.Fragment,{children:n&&(0,g.jsx)(E,{selector:"#modal",children:(0,g.jsx)("div",{className:M("modal",r&&"dimmed"),onClick:function(e){return null===o||void 0===o?void 0:o(e)},children:(0,g.jsx)("div",{className:M("modalLayer"),onClick:function(e){return e.stopPropagation()},children:i})})})})},Z=_().bind(w()),R=function(){var e=(0,u.useState)("/nextjs/img/imageCrop/imgTest.jpg"),n=e[0],t=e[1],r=(0,u.useState)(""),o=r[0],m=r[1],h=(0,u.useState)(""),l=h[0],d=h[1],p=(0,u.useState)(!1),x=p[0],f=p[1],w=function(){var e=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:d(URL.createObjectURL(n)),m(n.name),f(!0);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(URL.createObjectURL(n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsx)(c.Z,{children:(0,g.jsx)(s.Z,{children:(0,g.jsxs)("div",{style:{margin:"50px",paddingBottom:"100px"},children:[(0,g.jsxs)("label",{style:{display:"block",marginBottom:"10px"},children:[(0,g.jsx)("a",{className:Z("btnChoice"),children:"select images"}),(0,g.jsx)("input",{type:"file",className:Z("hidden"),value:[],onChange:function(e){var n;return w(null===(n=e.target.files)||void 0===n?void 0:n[0])}})]}),(0,g.jsx)("img",{src:n}),(0,g.jsx)(O,{visible:x,children:(0,g.jsx)(S,{imgSrc:l,imgName:o,width:560,height:560,onClick:v,onClose:function(){return f(!1)}})})]})})})}},5656:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/imageCrop",function(){return t(6774)}])},1802:function(e){e.exports={contents:"contents_contents__2RZDA"}},5369:function(e){e.exports={hidden:"modal_hidden__2LesQ",textEmphasis:"modal_textEmphasis__8nAsI",modal:"modal_modal__HQyak",dimmed:"modal_dimmed__1ZVUk",modalLayer:"modal_modalLayer__3af_d"}},4760:function(e){e.exports={hidden:"imageCrop_hidden__2SJMe",textEmphasis:"imageCrop_textEmphasis__2UE7b",imageCropModal:"imageCrop_imageCropModal__9eOXz",titleArea:"imageCrop_titleArea__b0AGu",title:"imageCrop_title__2kKEP",btnArea:"imageCrop_btnArea__2M6oK",btn:"imageCrop_btn__2xzdA",save:"imageCrop_save__1RAUV",imageArea:"imageCrop_imageArea__2C3Vh",wrap:"imageCrop_wrap__1KkLw",cropArea:"imageCrop_cropArea__34F3E",imgArea:"imageCrop_imgArea__3TSYh",imgBox:"imageCrop_imgBox__1DpaO",dimmedBox:"imageCrop_dimmedBox__Ljad8",cropBox:"imageCrop_cropBox__32w2s",viewBox:"imageCrop_viewBox__1NPLW",viewImg:"imageCrop_viewImg__2yNIO",dash:"imageCrop_dash__1k5qe",w:"imageCrop_w__3wDdG",h:"imageCrop_h__2SQGo",cross:"imageCrop_cross__3E83l",moveBox:"imageCrop_moveBox__1ARXf",line:"imageCrop_line__3pgnf",n:"imageCrop_n__SHC68",e:"imageCrop_e__2jt7w",s:"imageCrop_s__1S21u",point:"imageCrop_point__1sRRv",nw:"imageCrop_nw__nccC3",ne:"imageCrop_ne__2r6NJ",se:"imageCrop_se__1HLvC",sw:"imageCrop_sw__1Y9E7",cropBoxInfo:"imageCrop_cropBoxInfo__3dM_C"}},907:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,{Z:function(){return r}})},5861:function(e,n,t){"use strict";function r(e,n,t,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(i,o){var a=e.apply(n,t);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}t.d(n,{Z:function(){return i}})},2982:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(907);var i=t(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(907);function i(e,n){if(e){if("string"===typeof e)return(0,r.Z)(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?(0,r.Z)(e,n):void 0}}}},function(e){e.O(0,[774,888,179],(function(){return n=5656,e(e.s=n);var n}));var n=e.O();_N_E=n}]);