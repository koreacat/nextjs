_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"38tU":function(e,t,n){"use strict";var r=n("nKUr"),o=n("Bihf"),a=n.n(o),i=n("UbMB"),c=n.n(i).a.bind(a.a);t.a=function(e){return Object(r.jsx)("div",{className:c("contents"),children:e.children})}},Bihf:function(e,t,n){e.exports={contents:"contents_contents__2RZDA"}},BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("a3WO");function o(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("a3WO");var o=n("BsWD");function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Qetd:function(e,t,n){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},REZm:function(e,t,n){e.exports={wrap:"imageCrop_wrap__1KkLw",cropArea:"imageCrop_cropArea__34F3E",imgArea:"imageCrop_imgArea__3TSYh",imgBox:"imageCrop_imgBox__1DpaO",dimmedBox:"imageCrop_dimmedBox__Ljad8",cropBox:"imageCrop_cropBox__32w2s",viewBox:"imageCrop_viewBox__1NPLW",viewImg:"imageCrop_viewImg__2yNIO",dash:"imageCrop_dash__1k5qe",w:"imageCrop_w__3wDdG",h:"imageCrop_h__2SQGo",cross:"imageCrop_cross__3E83l",moveBox:"imageCrop_moveBox__1ARXf",line:"imageCrop_line__3pgnf",n:"imageCrop_n__SHC68",e:"imageCrop_e__2jt7w",s:"imageCrop_s__1S21u",point:"imageCrop_point__1sRRv",nw:"imageCrop_nw__nccC3",ne:"imageCrop_ne__2r6NJ",se:"imageCrop_se__1HLvC",sw:"imageCrop_sw__1Y9E7",cropBoxInfo:"imageCrop_cropBoxInfo__3dM_C",btn:"imageCrop_btn__2xzdA",btnChoice:"imageCrop_btnChoice__1un7P"}},UbMB:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(o.apply(this,r));else if("object"===a)for(var i in r)n.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},VFRM:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/imageCrop",function(){return n("r9nI")}])},Z5kR:function(e,t,n){"use strict";var r=n("nKUr");t.a=function(e){return Object(r.jsx)("div",{className:"layout",children:e.children})}},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},r9nI:function(e,t,n){"use strict";n.r(t);var r,o=n("nKUr"),a=n("38tU"),i=n("Z5kR"),c=n("q1tI"),s=n("KQm4"),u=Object.freeze({x:0,y:0}),h=Object.freeze({w:0,h:0});!function(e){e.e="e",e.w="w",e.s="s",e.n="n",e.se="se",e.sw="sw",e.ne="ne",e.nw="nw"}(r||(r={}));var m=["e","w","s","n"],p=Object(s.a)(Object.keys(r));function f(e,t,n){return Math.min(Math.max(e,t),n)}var x=n("REZm"),d=n.n(x),w=n("UbMB"),l=n.n(w),g=l.a.bind(d.a),v=function(e){var t=e.imgSize,n=e.setOffset,r=e.setCropBoxSize,a=e.offsetTop,i=e.offsetLeft;return Object(o.jsx)("div",{className:g("dimmedBox"),onMouseDown:function(e){e.preventDefault();var o=e.pageX,c=e.pageY,s=function(e){n({x:o-i,y:c-a}),r({w:0,h:0});var s=e.pageX-o,u=e.pageY-c,h=o-i,m=c-a,p=(s<0?e.pageX:o)-i,x=(u<0?e.pageY:c)-a,d=s<0?h:t.w-h,w=u<0?m:t.h-m,l=f(Math.abs(s),0,d),g=f(Math.abs(u),0,w);n({x:Math.max(p,0),y:Math.max(x,0)}),r({w:l,h:g})};document.addEventListener("mousemove",s),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e)}))},style:{width:"".concat(t.w,"px"),height:"".concat(t.h,"px")}})},j=l.a.bind(d.a);var b=function(e){var t=e.wrapRef,n=e.imgSrc,r=e.imgSize,a=e.offset,i=e.setOffset,s=e.cropBoxSize,h=e.setCropBoxSize,x=Object(c.useRef)(u),d=function(e){var t,n,o=x.current,a={x:e.clientX,y:e.clientY},c={x:(t=a).x-(n=o).x,y:t.y-n.y};x.current=a,i((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=e.x+t.x,c=e.y+t.y;return{x:f(i,n,o),y:f(c,r,a)}}(e,c,0,0,r.w-s.w,r.h-s.h)}))},w=function e(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e)},l=function(e,n){e.preventDefault();var o=a.x+s.w,c=a.x,u=a.y+s.h,m=a.y,p=function(e){var n=e.pageX-t.current.offsetLeft,o=e.pageY-t.current.offsetTop;x({x:f(n,0,r.w),y:f(o,0,r.h)})},x=function(e){var t=!(c+s.w>e.x),r=o-s.w>e.x,p=!(m+s.h>e.y),f=u-s.h>e.y,x=o-s.w-(a.x-e.x),d=c-(a.x-e.x),w=u-s.h-(a.y-e.y),l=m-(a.y-e.y),g=o-s.w-e.x,v=e.x-c-s.w,j=u-s.h-e.y,b=e.y-m-s.h,_=s.w+e.x-o,y=s.w+c-e.x,O=s.h+e.y-u,C=s.h+m-e.y;switch(n){case"e":r?(i({x:x,y:a.y}),h({w:g,h:s.h})):h({w:_,h:s.h});break;case"w":t?h({w:v,h:s.h}):(i({x:d,y:a.y}),h({w:y,h:s.h}));break;case"s":f?(i({x:a.x,y:w}),h({w:s.w,h:j})):h({w:s.w,h:O});break;case"n":p?h({w:s.w,h:b}):(i({x:a.x,y:l}),h({w:s.w,h:C}));break;case"se":f&&r?(i({x:x,y:w}),h({w:g,h:j})):r?(i({x:x,y:a.y}),h({w:g,h:O})):f?(i({x:a.x,y:w}),h({w:_,h:j})):h({w:_,h:O});break;case"sw":f&&t?(i({x:a.x+s.w,y:l}),h({w:v,h:j})):t?h({w:v,h:O}):f?(i({x:d,y:l}),h({w:y,h:j})):(i({x:d,y:a.y}),h({w:y,h:O}));break;case"ne":p&&r?(i({x:x,y:a.y+s.h}),h({w:g,h:b})):r?(i({x:x,y:l}),h({w:g,h:C})):p?h({w:_,h:b}):(i({x:a.x,y:l}),h({w:_,h:C}));break;case"nw":p&&t?h({w:v,h:b}):t?(i({x:a.x+s.w,y:l}),h({w:v,h:C})):p?(i({x:d,y:a.y+s.h}),h({w:y,h:b})):(i({x:d,y:l}),h({w:y,h:C}))}};document.addEventListener("mousemove",p),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",e)}))};return Object(o.jsxs)("div",{className:j("cropBox"),style:{width:"".concat(s.w,"px"),height:"".concat(s.h,"px"),transform:"translateX(".concat(a.x,"px) translateY(").concat(a.y,"px)")},children:[Object(o.jsx)("span",{className:j("viewBox"),children:Object(o.jsx)("img",{className:j("viewImg"),src:n,style:{width:"".concat(r.w,"px"),height:"".concat(r.h,"px"),transform:"translateX(-".concat(a.x,"px) translateY(-").concat(a.y,"px)")}})}),["w","h"].map((function(e){return Object(o.jsx)("span",{className:j("dash",e)},e)})),Object(o.jsx)("span",{className:j("cross")}),Object(o.jsx)("span",{className:j("moveBox"),onMouseDown:function(e){e.preventDefault(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",w),x.current={x:e.clientX,y:e.clientY}}}),m.map((function(e){return Object(o.jsx)("span",{className:j("line",e),onMouseDown:function(t){return l(t,e)}},e)})),p.map((function(e){return Object(o.jsx)("span",{className:j("point",e),onMouseDown:function(t){return l(t,e)}},e)})),Object(o.jsxs)("span",{className:j("cropBoxInfo"),children:[a.x,", ",a.y,Object(o.jsx)("br",{}),s.w,", ",s.h," (px)"]})]})},_=l.a.bind(d.a),y=function(e){var t,n,r,a,i=e.imgSrc,s=e.imgName,m=e.width,p=e.height,f=Object(c.useRef)(null),x=Object(c.useRef)(null),d=Object(c.useState)(h),w=d[0],l=d[1],g=Object(c.useState)(h),j=g[0],y=g[1],O=Object(c.useState)(u),C=O[0],B=O[1],S=Object(c.useState)(1),N=S[0],E=S[1],L=Object(c.useState)(1),M=L[0],R=L[1];Object(c.useEffect)((function(){A()}),[i]);var A=function(){var e=new Image;e.src=i,e.onload=function(){var t=function(e,t){return e>m&&t>p?p>m?m:e*(p/t):t>p?Math.min(e,m)*(p/t):Math.min(e,m)}(e.width,e.height),n=function(e,t){return e>m&&t>p?p<m?p:t*(m/e):e>m?Math.min(t,p)*(m/e):Math.min(t,p)}(e.width,e.height);E(t/e.width),R(n/e.height),l({w:t,h:n}),y({w:t/2,h:n/2}),B({x:t/4,y:n/4})}};return i?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{ref:f,className:_("wrap"),style:{width:"".concat(m,"px"),height:"".concat(p,"px")},children:Object(o.jsxs)("div",{ref:x,className:_("cropArea"),style:{width:"".concat(w.w,"px"),height:"".concat(w.h,"px")},children:[Object(o.jsx)("div",{className:_("imgArea"),children:Object(o.jsx)("div",{className:_("imgBox"),children:Object(o.jsx)("img",{className:_("img"),src:i,style:{width:"".concat(w.w,"px"),height:"".concat(w.h,"px")}})})}),Object(o.jsx)(v,{offsetTop:(null===(t=f.current)||void 0===t?void 0:t.offsetTop)+(null===(n=x.current)||void 0===n?void 0:n.offsetTop),offsetLeft:(null===(r=f.current)||void 0===r?void 0:r.offsetLeft)+(null===(a=x.current)||void 0===a?void 0:a.offsetLeft),imgSize:w,setOffset:B,setCropBoxSize:y}),Object(o.jsx)(b,{wrapRef:f,imgSrc:i,imgSize:w,offset:C,setOffset:B,cropBoxSize:j,setCropBoxSize:y})]})}),Object(o.jsx)("a",{className:_("btn"),onClick:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=new Image;e.width=j.w,e.height=j.h,n.src=i,n.onload=function(){var r=document.createElement("canvas"),o=r.getContext("2d");r.width=n.width*N,r.height=n.height*M,o.drawImage(n,0,0,r.width,r.height),t.drawImage(r,C.x,C.y,j.w,j.h,0,0,j.w,j.h),function(e){var t=document.createElement("a");t.href=e,t.download=s,t.click(),t.remove(),window.URL.revokeObjectURL(e)}(e.toDataURL())}},children:"download"})]}):null},O=l.a.bind(d.a);t.default=function(){var e=Object(c.useState)("/nextjs/img/imageCrop/imgTest.jpg"),t=e[0],n=e[1],r=Object(c.useState)(""),s=r[0],u=r[1];return Object(o.jsx)(i.a,{children:Object(o.jsx)(a.a,{children:Object(o.jsxs)("div",{style:{margin:"50px",paddingBottom:"100px"},children:[Object(o.jsxs)("label",{style:{display:"block",marginBottom:"10px"},children:[Object(o.jsx)("a",{className:O("btnChoice"),children:"select images"}),Object(o.jsx)("input",{style:{display:"none"},type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){return function(e){if(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n(t.result),u(e.name)}}}(e.target.files[0])}})]}),Object(o.jsx)("div",{style:{width:"360px",height:"600px"},children:Object(o.jsx)(y,{imgSrc:t,imgName:s,width:360,height:600})})]})})})}}},[["VFRM",0,1]]]);