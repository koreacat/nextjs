(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{7166:function(t,e){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(this&&this[n]||n);else if(Array.isArray(n))t.push(a.apply(this,n));else if("object"===o)for(var i in n)r.call(n,i)&&n[i]&&t.push(this&&this[i]||i)}}return t.join(" ")}t.exports?(a.default=a,t.exports=a):void 0===(n=function(){return a}.apply(e,[]))||(t.exports=n)}()},720:function(t,e,n){"use strict";var r=n(1802),a=n.n(r),o=n(7166),i=n.n(o),u=n(5893),c=i().bind(a());e.Z=function(t){return(0,u.jsx)("div",{className:c("contents"),children:t.children})}},9374:function(t,e,n){"use strict";var r=n(5893);e.Z=function(t){return(0,r.jsx)("div",{className:"layout",children:t.children})}},6304:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var r=n(720),a=n(9374),o=n(7294),i=n(8312),u=n.n(i),c=n(7166),s=n.n(c),f=n(5893),l=s().bind(u()),v=Object.freeze({x:0,y:0});function h(t,e){return{x:t.x-e.x,y:t.y-e.y}}function d(t,e){return{x:t.x+e.x,y:t.y+e.y}}var x=function(t){var e=t.canvasWidth,n=t.canvasHeight,r=t.chartDataList,a=(0,o.useRef)(null),i=(0,o.useState)(null),u=i[0],c=i[1],s=(0,o.useState)(1),x=s[0],p=s[1],y=(0,o.useState)(v),m=y[0],b=y[1],_=(0,o.useState)(v),E=_[0],w=_[1],g=(0,o.useState)(v),L=g[0],j=g[1],M=(0,o.useState)((0,f.jsx)(f.Fragment,{})),S=M[0],T=M[1],C=(0,o.useState)({x:"0px",y:"0px"}),N=C[0],P=C[1],W=(0,o.useRef)(!1),k=(0,o.useRef)(v),D=(0,o.useRef)(v);(0,o.useEffect)((function(){D.current=m}),[m]),(0,o.useEffect)((function(){var t=a.current;if(null!==t)return t.addEventListener("mousemove",e),t.addEventListener("wheel",e),function(){t.removeEventListener("mousemove",e),t.removeEventListener("wheel",e)};function e(t){if(t.preventDefault(),a.current){var e={x:t.offsetX,y:t.offsetY},n={x:a.current.offsetLeft,y:a.current.offsetTop};w(h(e,n))}}}),[]),(0,o.useEffect)((function(){var t=a.current;if(null!==t)return t.addEventListener("wheel",e),function(){return t.removeEventListener("wheel",e)};function e(t){if(t.preventDefault(),u){var e=1-t.deltaY/500;if(x*e<.3)return;if(x*e>3)return;var n={x:E.x/x*(1-1/e),y:E.y/x*(1-1/e)},r=d(L,n);u.translate(L.x,L.y),u.scale(e,e),u.translate(-r.x,-r.y),j(r),p(x*e),W.current=!1}}}),[u,E.x,E.y,L,x]),(0,o.useLayoutEffect)((function(){if(a){var t=a.current.getContext("2d");t&&Z(t)}}),[n,e,r]),(0,o.useLayoutEffect)((function(){if(u&&D.current){var t=function(t,e){return{x:t.x/e,y:t.y/e}}(h(m,D.current),x);u.translate(t.x,t.y),j((function(e){return h(e,t)})),W.current=!1}}),[u,m,x]),(0,o.useLayoutEffect)((function(){if(u){var t=u.getTransform();u.canvas.width=u.canvas.width,u.setTransform(t),X(),R(),Y()}}),[e,n,r,u,x,m,L]);var X=function(){var t=110,r=Math.floor(20*e/t)-2,a=Math.floor(20*n/t)-2,o=e-r*t,i=n-a*t,c=Math.ceil(o/2)-.5,s=Math.ceil(i/2)-.5,f=e-r*t-c,l=n-a*t-s;u.strokeStyle="lightgrey",u.beginPath();for(var v=c;v<=e-f;v+=t)u.moveTo(v,s),u.lineTo(v,n-l);for(var h=s;h<=n-l;h+=t)u.moveTo(c,h),u.lineTo(e-f,h);u.stroke()},R=function(){r&&r.sort((function(t,e){return e.r-t.r})).forEach((function(t){var e=t.point,n=e.x,r=e.y,a=t.r,o=t.fill;u.beginPath(),u.arc(n,r,a,0,2*Math.PI),u.fillStyle=o,u.fill()}))},Y=function(){},Z=function(t){!t&&W.current||(t.canvas.width=1*e,t.canvas.height=1*n,t.scale(1,1),p(1),c(t),b(v),w(v),j(v),D.current=v,k.current=v,W.current=!0)},A=function(t){if(u&&t.target===u.canvas){var e=k.current,n={x:t.offsetX,y:t.offsetY};k.current=n;var r=h(n,e);b((function(t){return d(t,r)}))}},I=function t(){a.current.style.cursor="crosshair",document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",t)};return(0,f.jsxs)("div",{className:l("wrap"),style:{width:1*e},children:[(0,f.jsx)("canvas",{onMouseMove:function(t){u&&r&&(T(null),r.forEach((function(e){var n=e.point,r=n.x,a=n.y,o=e.r,i=e.toolTip,c=new Path2D;if(c.arc(r,a,o,0,2*Math.PI),u.isPointInPath(c,t.nativeEvent.offsetX,t.nativeEvent.offsetY))return P({x:"".concat(t.nativeEvent.offsetX,"px"),y:"".concat(t.nativeEvent.offsetY-50,"px")}),void T(i)})))},onMouseDown:function(t){a.current.style.cursor="grabbing",document.addEventListener("mousemove",A),document.addEventListener("mouseup",I),k.current={x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY}},ref:a,width:1*e,height:1*n,style:{cursor:"crosshair",width:"".concat(e,"px"),height:"".concat(n,"px")}}),(0,f.jsx)("div",{className:l("tooltipWrap"),style:{transform:"translate(".concat(N.x,", ").concat(N.y,")")},children:S}),(0,f.jsxs)("span",{className:l("scale"),children:["scale: ",x.toFixed(2)]}),(0,f.jsx)("button",{className:l("btn"),onClick:function(){return u&&Z(u)},children:"Reset"})]})},p=n(2363),y=function(t){var e=t.title;return(0,f.jsx)("div",{style:{background:"#fff",borderRadius:"5px",padding:"10px 20px",fontSize:"14px",fontWeight:700},children:e})},m=function(){return(0,f.jsx)(a.Z,{children:(0,f.jsx)(r.Z,{children:(0,f.jsx)(x,{canvasWidth:700,canvasHeight:500,chartDataList:new Array(30).fill({}).map((function(){return function(){var t=100+(0,p.W)(500),e=400-t+(0,p.W)(300),n=5+(0,p.W)(40);return{point:{x:t,y:e},r:n,fill:"#".concat(Math.round(16777215*Math.random()).toString(16)),toolTip:(0,f.jsx)(y,{title:"x: ".concat(t," y: ").concat(e," r: ").concat(n)}),title:""}}()}))})})})}},2363:function(t,e,n){"use strict";n.d(e,{W:function(){return r}});var r=function(t){return Math.floor(Math.random()*t)}},6646:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bubbleChart",function(){return n(6304)}])},8312:function(t){t.exports={hidden:"bubbleChart_hidden__1XmSu",textEmphasis:"bubbleChart_textEmphasis__1Z_GG",wrap:"bubbleChart_wrap__1DqYm",tooltipWrap:"bubbleChart_tooltipWrap__rsgTJ",scale:"bubbleChart_scale__I2Lff",btn:"bubbleChart_btn__15cc5"}},1802:function(t){t.exports={contents:"contents_contents__2RZDA"}}},function(t){t.O(0,[774,888,179],(function(){return e=6646,t(t.s=e);var e}));var e=t.O();_N_E=e}]);