_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"38tU":function(e,t,n){"use strict";var r=n("nKUr"),o=n("Bihf"),a=n.n(o),i=n("UbMB"),c=n.n(i).a.bind(a.a);t.a=function(e){return Object(r.jsx)("div",{className:c("contents"),children:e.children})}},Bihf:function(e,t,n){e.exports={contents:"contents_contents__2RZDA"}},BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("a3WO");function o(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("a3WO");var o=n("BsWD");function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Qetd:function(e,t,n){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},REZm:function(e,t,n){e.exports={wrap:"imageCrop_wrap__1KkLw",cropArea:"imageCrop_cropArea__34F3E",imgArea:"imageCrop_imgArea__3TSYh",imgBox:"imageCrop_imgBox__1DpaO",dimmedBox:"imageCrop_dimmedBox__Ljad8",cropBox:"imageCrop_cropBox__32w2s",viewBox:"imageCrop_viewBox__1NPLW",viewImg:"imageCrop_viewImg__2yNIO",dash:"imageCrop_dash__1k5qe",w:"imageCrop_w__3wDdG",h:"imageCrop_h__2SQGo",cross:"imageCrop_cross__3E83l",moveBox:"imageCrop_moveBox__1ARXf",line:"imageCrop_line__3pgnf",n:"imageCrop_n__SHC68",e:"imageCrop_e__2jt7w",s:"imageCrop_s__1S21u",point:"imageCrop_point__1sRRv",nw:"imageCrop_nw__nccC3",ne:"imageCrop_ne__2r6NJ",se:"imageCrop_se__1HLvC",sw:"imageCrop_sw__1Y9E7",cropBoxInfo:"imageCrop_cropBoxInfo__3dM_C",btn:"imageCrop_btn__2xzdA",btnChoice:"imageCrop_btnChoice__1un7P"}},UbMB:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(o.apply(this,r));else if("object"===a)for(var i in r)n.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},VFRM:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/imageCrop",function(){return n("r9nI")}])},Z5kR:function(e,t,n){"use strict";var r=n("nKUr");t.a=function(e){return Object(r.jsx)("div",{className:"layout",children:e.children})}},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},r9nI:function(e,t,n){"use strict";n.r(t);var r,o=n("nKUr"),a=n("38tU"),i=n("Z5kR"),c=n("q1tI"),s=n("KQm4"),u=Object.freeze({x:0,y:0}),h=Object.freeze({w:0,h:0});!function(e){e.e="e",e.w="w",e.s="s",e.n="n",e.se="se",e.sw="sw",e.ne="ne",e.nw="nw"}(r||(r={}));var m=["e","w","s","n"],f=Object(s.a)(Object.keys(r));function p(e,t,n){return Math.min(Math.max(e,t),n)}var x=n("REZm"),d=n.n(x),w=n("UbMB"),l=n.n(w),g=l.a.bind(d.a),v=function(e){var t=e.imgSize,n=e.setOffset,r=e.setCropBoxSize,a=e.offsetTop,i=e.offsetLeft;return Object(o.jsx)("div",{className:g("dimmedBox"),onMouseDown:function(e){e.preventDefault();var o=e.pageX,c=e.pageY,s=function(e){n({x:o-i,y:c-a}),r({w:0,h:0});var s=e.pageX-o,u=e.pageY-c,h=o-i,m=c-a,f=(s<0?e.pageX:o)-i,x=(u<0?e.pageY:c)-a,d=s<0?h:t.w-h,w=u<0?m:t.h-m,l=p(Math.abs(s),0,d),g=p(Math.abs(u),0,w);n({x:Math.max(f,0),y:Math.max(x,0)}),r({w:l,h:g})};document.addEventListener("mousemove",s),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e)}))},style:{width:"".concat(t.w,"px"),height:"".concat(t.h,"px")}})},j=l.a.bind(d.a);var b=function(e){var t=e.imgSrc,n=e.imgSize,r=e.offset,a=e.setOffset,i=e.cropBoxSize,s=e.setCropBoxSize,h=e.offsetTop,x=e.offsetLeft,d=Object(c.useRef)(u),w=function(e){var t,r,o=d.current,c={x:e.clientX,y:e.clientY},s={x:(t=c).x-(r=o).x,y:t.y-r.y};d.current=c,a((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=e.x+t.x,c=e.y+t.y;return{x:p(i,n,o),y:p(c,r,a)}}(e,s,0,0,n.w-i.w,n.h-i.h)}))},l=function e(){document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",e)},g=function(e,t){e.preventDefault();var o=r.x+i.w,c=r.x,u=r.y+i.h,m=r.y,f=function(e){var t=e.pageX-x,r=e.pageY-h;d({x:p(t,0,n.w),y:p(r,0,n.h)})},d=function(e){var n=!(c+i.w>e.x),h=o-i.w>e.x,f=!(m+i.h>e.y),p=u-i.h>e.y,x=o-i.w-(r.x-e.x),d=c-(r.x-e.x),w=u-i.h-(r.y-e.y),l=m-(r.y-e.y),g=o-i.w-e.x,v=e.x-c-i.w,j=u-i.h-e.y,b=e.y-m-i.h,_=i.w+e.x-o,y=i.w+c-e.x,O=i.h+e.y-u,C=i.h+m-e.y;switch(t){case"e":h?(a({x:x,y:r.y}),s({w:g,h:i.h})):s({w:_,h:i.h});break;case"w":n?s({w:v,h:i.h}):(a({x:d,y:r.y}),s({w:y,h:i.h}));break;case"s":p?(a({x:r.x,y:w}),s({w:i.w,h:j})):s({w:i.w,h:O});break;case"n":f?s({w:i.w,h:b}):(a({x:r.x,y:l}),s({w:i.w,h:C}));break;case"se":p&&h?(a({x:x,y:w}),s({w:g,h:j})):h?(a({x:x,y:r.y}),s({w:g,h:O})):p?(a({x:r.x,y:w}),s({w:_,h:j})):s({w:_,h:O});break;case"sw":p&&n?(a({x:r.x+i.w,y:l}),s({w:v,h:j})):n?s({w:v,h:O}):p?(a({x:d,y:l}),s({w:y,h:j})):(a({x:d,y:r.y}),s({w:y,h:O}));break;case"ne":f&&h?(a({x:x,y:r.y+i.h}),s({w:g,h:b})):h?(a({x:x,y:l}),s({w:g,h:C})):f?s({w:_,h:b}):(a({x:r.x,y:l}),s({w:_,h:C}));break;case"nw":f&&n?s({w:v,h:b}):n?(a({x:r.x+i.w,y:l}),s({w:v,h:C})):f?(a({x:d,y:r.y+i.h}),s({w:y,h:b})):(a({x:d,y:l}),s({w:y,h:C}))}};document.addEventListener("mousemove",f),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",e)}))};return Object(o.jsxs)("div",{className:j("cropBox"),style:{width:"".concat(i.w,"px"),height:"".concat(i.h,"px"),transform:"translateX(".concat(r.x,"px) translateY(").concat(r.y,"px)")},children:[Object(o.jsx)("span",{className:j("viewBox"),children:Object(o.jsx)("img",{className:j("viewImg"),src:t,style:{width:"".concat(n.w,"px"),height:"".concat(n.h,"px"),transform:"translateX(-".concat(r.x,"px) translateY(-").concat(r.y,"px)")}})}),["w","h"].map((function(e){return Object(o.jsx)("span",{className:j("dash",e)},e)})),Object(o.jsx)("span",{className:j("cross")}),Object(o.jsx)("span",{className:j("moveBox"),onMouseDown:function(e){e.preventDefault(),document.addEventListener("mousemove",w),document.addEventListener("mouseup",l),d.current={x:e.clientX,y:e.clientY}}}),m.map((function(e){return Object(o.jsx)("span",{className:j("line",e),onMouseDown:function(t){return g(t,e)}},e)})),f.map((function(e){return Object(o.jsx)("span",{className:j("point",e),onMouseDown:function(t){return g(t,e)}},e)})),Object(o.jsxs)("span",{className:j("cropBoxInfo"),children:[r.x,", ",r.y,Object(o.jsx)("br",{}),i.w,", ",i.h," (px)"]})]})},_=l.a.bind(d.a),y=function(e){var t=e.imgSrc,n=e.imgName,r=e.width,a=e.height,i=Object(c.useRef)(null),s=Object(c.useRef)(null),m=Object(c.useState)(h),f=m[0],p=m[1],x=Object(c.useState)(h),d=x[0],w=x[1],l=Object(c.useState)(u),g=l[0],j=l[1],y=Object(c.useState)(1),O=y[0],C=y[1],B=Object(c.useState)(1),S=B[0],N=B[1];Object(c.useEffect)((function(){M()}),[t]);var E=function(){var e;return(i.current?i.current.offsetTop:0)+(s.current?null===(e=s.current)||void 0===e?void 0:e.offsetTop:0)},L=function(){var e;return(i.current?null===(e=i.current)||void 0===e?void 0:e.offsetLeft:0)+(s.current?s.current.offsetLeft:0)},M=function(){var e=new Image;e.src=t,e.onload=function(){var t=function(e,t){return e>r&&t>a?a>r?r:e*(a/t):t>a?Math.min(e,r)*(a/t):Math.min(e,r)}(e.width,e.height),n=function(e,t){return e>r&&t>a?a<r?a:t*(r/e):e>r?Math.min(t,a)*(r/e):Math.min(t,a)}(e.width,e.height);C(t/e.width),N(n/e.height),p({w:t,h:n}),w({w:t/2,h:n/2}),j({x:t/4,y:n/4})}};return t?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{ref:i,className:_("wrap"),style:{width:"".concat(r,"px"),height:"".concat(a,"px")},children:Object(o.jsxs)("div",{ref:s,className:_("cropArea"),style:{width:"".concat(f.w,"px"),height:"".concat(f.h,"px")},children:[Object(o.jsx)("div",{className:_("imgArea"),children:Object(o.jsx)("div",{className:_("imgBox"),children:Object(o.jsx)("img",{className:_("img"),src:t,style:{width:"".concat(f.w,"px"),height:"".concat(f.h,"px")}})})}),Object(o.jsx)(v,{imgSize:f,setOffset:j,setCropBoxSize:w,offsetTop:E(),offsetLeft:L()}),Object(o.jsx)(b,{imgSrc:t,imgSize:f,offset:g,setOffset:j,cropBoxSize:d,setCropBoxSize:w,offsetTop:E(),offsetLeft:L()})]})}),Object(o.jsx)("a",{className:_("btn"),onClick:function(){var e=document.createElement("canvas"),r=e.getContext("2d"),o=new Image;e.width=d.w,e.height=d.h,o.src=t,o.onload=function(){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=o.width*O,t.height=o.height*S,null===a||void 0===a||a.drawImage(o,0,0,t.width,t.height),null===r||void 0===r||r.drawImage(t,g.x,g.y,d.w,d.h,0,0,d.w,d.h),function(e){var t=document.createElement("a");t.href=e,t.download=n,t.click(),t.remove(),window.URL.revokeObjectURL(e)}(e.toDataURL())}},children:"download"})]}):null},O=l.a.bind(d.a);t.default=function(){var e=Object(c.useState)("/nextjs/img/imageCrop/imgTest.jpg"),t=e[0],n=e[1],r=Object(c.useState)(""),s=r[0],u=r[1];return Object(o.jsx)(i.a,{children:Object(o.jsx)(a.a,{children:Object(o.jsxs)("div",{style:{margin:"50px",paddingBottom:"100px"},children:[Object(o.jsxs)("label",{style:{display:"block",marginBottom:"10px"},children:[Object(o.jsx)("a",{className:O("btnChoice"),children:"select images"}),Object(o.jsx)("input",{style:{display:"none"},type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){return function(e){if(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n(t.result),u(e.name)}}}(e.target.files[0])}})]}),Object(o.jsx)("div",{style:{width:"360px",height:"600px"},children:Object(o.jsx)(y,{imgSrc:t,imgName:s,width:360,height:600})})]})})})}}},[["VFRM",0,1]]]);