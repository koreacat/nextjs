(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[737],{7166:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(this&&this[n]||n);else if(Array.isArray(n))e.push(o.apply(this,n));else if("object"===i)for(var a in n)r.call(n,a)&&n[a]&&e.push(this&&this[a]||a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},720:function(e,t,n){"use strict";var r=n(1802),o=n.n(r),i=n(7166),a=n.n(i),s=n(5893),c=a().bind(o());t.Z=function(e){return(0,s.jsx)("div",{className:c("contents"),children:e.children})}},9374:function(e,t,n){"use strict";var r=n(5893);t.Z=function(e){return(0,r.jsx)("div",{className:"layout",children:e.children})}},7232:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r,o=n(720),i=n(9374),a=n(7294),s=n(2982),c=Object.freeze({x:0,y:0}),u=Object.freeze({w:0,h:0});!function(e){e.e="e",e.w="w",e.s="s",e.n="n",e.se="se",e.sw="sw",e.ne="ne",e.nw="nw"}(r||(r={}));var h=["e","w","s","n"],m=(0,s.Z)(Object.keys(r));function f(e,t,n){return Math.min(Math.max(e,t),n)}var p=n(4760),x=n.n(p),d=n(7166),l=n.n(d),w=n(5893),g=l().bind(x()),v=function(e){var t=e.imgSize,n=e.setOffset,r=e.setCropBoxSize,o=e.offsetTop,i=e.offsetLeft;return(0,w.jsx)("div",{className:g("dimmedBox"),onMouseDown:function(e){e.preventDefault();var a=e.pageX,s=e.pageY,c=function(e){n({x:a-i,y:s-o}),r({w:0,h:0});var c=e.pageX-a,u=e.pageY-s,h=a-i,m=s-o,p=(c<0?e.pageX:a)-i,x=(u<0?e.pageY:s)-o,d=c<0?h:t.w-h,l=u<0?m:t.h-m,w=f(Math.abs(c),0,d),g=f(Math.abs(u),0,l);n({x:Math.max(p,0),y:Math.max(x,0)}),r({w:w,h:g})};document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)}))},style:{width:"".concat(t.w,"px"),height:"".concat(t.h,"px")}})},_=l().bind(x());var y=function(e){var t=e.imgSrc,n=e.imgSize,r=e.offset,o=e.setOffset,i=e.cropBoxSize,s=e.setCropBoxSize,u=e.offsetTop,p=e.offsetLeft,x=(0,a.useRef)(c),d=function(e){var t,r,a=x.current,s={x:e.clientX,y:e.clientY},c={x:(t=s).x-(r=a).x,y:t.y-r.y};x.current=s,o((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=e.x+t.x,s=e.y+t.y;return{x:f(a,n,o),y:f(s,r,i)}}(e,c,0,0,n.w-i.w,n.h-i.h)}))},l=function e(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e)},g=function(e,t){e.preventDefault();var a=r.x+i.w,c=r.x,h=r.y+i.h,m=r.y,x=function(e){var t=e.pageX-p,r=e.pageY-u;d({x:f(t,0,n.w),y:f(r,0,n.h)})},d=function(e){var n=!(c+i.w>e.x),u=a-i.w>e.x,f=!(m+i.h>e.y),p=h-i.h>e.y,x=a-i.w-(r.x-e.x),d=c-(r.x-e.x),l=h-i.h-(r.y-e.y),w=m-(r.y-e.y),g=a-i.w-e.x,v=e.x-c-i.w,_=h-i.h-e.y,y=e.y-m-i.h,j=i.w+e.x-a,C=i.w+c-e.x,b=i.h+e.y-h,S=i.h+m-e.y;switch(t){case"e":u?(o({x:x,y:r.y}),s({w:g,h:i.h})):s({w:j,h:i.h});break;case"w":n?s({w:v,h:i.h}):(o({x:d,y:r.y}),s({w:C,h:i.h}));break;case"s":p?(o({x:r.x,y:l}),s({w:i.w,h:_})):s({w:i.w,h:b});break;case"n":f?s({w:i.w,h:y}):(o({x:r.x,y:w}),s({w:i.w,h:S}));break;case"se":p&&u?(o({x:x,y:l}),s({w:g,h:_})):u?(o({x:x,y:r.y}),s({w:g,h:b})):p?(o({x:r.x,y:l}),s({w:j,h:_})):s({w:j,h:b});break;case"sw":p&&n?(o({x:r.x+i.w,y:w}),s({w:v,h:_})):n?s({w:v,h:b}):p?(o({x:d,y:w}),s({w:C,h:_})):(o({x:d,y:r.y}),s({w:C,h:b}));break;case"ne":f&&u?(o({x:x,y:r.y+i.h}),s({w:g,h:y})):u?(o({x:x,y:w}),s({w:g,h:S})):f?s({w:j,h:y}):(o({x:r.x,y:w}),s({w:j,h:S}));break;case"nw":f&&n?s({w:v,h:y}):n?(o({x:r.x+i.w,y:w}),s({w:v,h:S})):f?(o({x:d,y:r.y+i.h}),s({w:C,h:y})):(o({x:d,y:w}),s({w:C,h:S}))}};document.addEventListener("mousemove",x),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",e)}))};return(0,w.jsxs)("div",{className:_("cropBox"),style:{width:"".concat(i.w,"px"),height:"".concat(i.h,"px"),transform:"translateX(".concat(r.x,"px) translateY(").concat(r.y,"px)")},children:[(0,w.jsx)("span",{className:_("viewBox"),children:(0,w.jsx)("img",{className:_("viewImg"),src:t,style:{width:"".concat(n.w,"px"),height:"".concat(n.h,"px"),transform:"translateX(-".concat(r.x,"px) translateY(-").concat(r.y,"px)")}})}),["w","h"].map((function(e){return(0,w.jsx)("span",{className:_("dash",e)},e)})),(0,w.jsx)("span",{className:_("cross")}),(0,w.jsx)("span",{className:_("moveBox"),onMouseDown:function(e){e.preventDefault(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",l),x.current={x:e.clientX,y:e.clientY}}}),h.map((function(e){return(0,w.jsx)("span",{className:_("line",e),onMouseDown:function(t){return g(t,e)}},e)})),m.map((function(e){return(0,w.jsx)("span",{className:_("point",e),onMouseDown:function(t){return g(t,e)}},e)})),(0,w.jsxs)("span",{className:_("cropBoxInfo"),children:[r.x,", ",r.y,(0,w.jsx)("br",{}),i.w,", ",i.h," (px)"]})]})},j=l().bind(x()),C=function(e){var t=e.imgSrc,n=e.imgName,r=e.width,o=e.height,i=(0,a.useRef)(null),s=(0,a.useRef)(null),h=(0,a.useState)(u),m=h[0],f=h[1],p=(0,a.useState)(u),x=p[0],d=p[1],l=(0,a.useState)(c),g=l[0],_=l[1],C=(0,a.useState)(1),b=C[0],S=C[1],N=(0,a.useState)(1),B=N[0],L=N[1];(0,a.useEffect)((function(){k()}),[t]);var E=function(){var e;return(i.current?i.current.offsetTop:0)+(s.current?null===(e=s.current)||void 0===e?void 0:e.offsetTop:0)},A=function(){var e;return(i.current?null===(e=i.current)||void 0===e?void 0:e.offsetLeft:0)+(s.current?s.current.offsetLeft:0)},k=function(){var e=new Image;e.src=t,e.onload=function(){var t=function(e,t){return e>r&&t>o?o>r?r:e*(o/t):t>o?Math.min(e,r)*(o/t):Math.min(e,r)}(e.width,e.height),n=function(e,t){return e>r&&t>o?o<r?o:t*(r/e):e>r?Math.min(t,o)*(r/e):Math.min(t,o)}(e.width,e.height);S(t/e.width),L(n/e.height),f({w:t,h:n}),d({w:t/2,h:n/2}),_({x:t/4,y:n/4})}};return t?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{ref:i,className:j("wrap"),style:{width:"".concat(r,"px"),height:"".concat(o,"px")},children:(0,w.jsxs)("div",{ref:s,className:j("cropArea"),style:{width:"".concat(m.w,"px"),height:"".concat(m.h,"px")},children:[(0,w.jsx)("div",{className:j("imgArea"),children:(0,w.jsx)("div",{className:j("imgBox"),children:(0,w.jsx)("img",{className:j("img"),src:t,style:{width:"".concat(m.w,"px"),height:"".concat(m.h,"px")}})})}),(0,w.jsx)(v,{imgSize:m,setOffset:_,setCropBoxSize:d,offsetTop:E(),offsetLeft:A()}),(0,w.jsx)(y,{imgSrc:t,imgSize:m,offset:g,setOffset:_,cropBoxSize:x,setCropBoxSize:d,offsetTop:E(),offsetLeft:A()})]})}),(0,w.jsx)("a",{className:j("btn"),onClick:function(){var e=document.createElement("canvas"),r=e.getContext("2d"),o=new Image;e.width=x.w,e.height=x.h,o.src=t,o.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=o.width*b,t.height=o.height*B,null===i||void 0===i||i.drawImage(o,0,0,t.width,t.height),null===r||void 0===r||r.drawImage(t,g.x,g.y,x.w,x.h,0,0,x.w,x.h),function(e){var t=document.createElement("a");t.href=e,t.download=n,t.click(),t.remove(),window.URL.revokeObjectURL(e)}(e.toDataURL())}},children:"download"})]}):null},b=l().bind(x()),S=function(){var e=(0,a.useState)("/nextjs/img/imageCrop/imgTest.jpg"),t=e[0],n=e[1],r=(0,a.useState)(""),s=r[0],c=r[1];return(0,w.jsx)(i.Z,{children:(0,w.jsx)(o.Z,{children:(0,w.jsxs)("div",{style:{margin:"50px",paddingBottom:"100px"},children:[(0,w.jsxs)("label",{style:{display:"block",marginBottom:"10px"},children:[(0,w.jsx)("a",{className:b("btnChoice"),children:"select images"}),(0,w.jsx)("input",{style:{display:"none"},type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){return function(e){if(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n(t.result),c(e.name)}}}(e.target.files[0])}})]}),(0,w.jsx)("div",{style:{width:"360px",height:"600px"},children:(0,w.jsx)(C,{imgSrc:t,imgName:s,width:360,height:600})})]})})})}},5656:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/imageCrop",function(){return n(7232)}])},1802:function(e){e.exports={contents:"contents_contents__2RZDA"}},4760:function(e){e.exports={wrap:"imageCrop_wrap__1KkLw",cropArea:"imageCrop_cropArea__34F3E",imgArea:"imageCrop_imgArea__3TSYh",imgBox:"imageCrop_imgBox__1DpaO",dimmedBox:"imageCrop_dimmedBox__Ljad8",cropBox:"imageCrop_cropBox__32w2s",viewBox:"imageCrop_viewBox__1NPLW",viewImg:"imageCrop_viewImg__2yNIO",dash:"imageCrop_dash__1k5qe",w:"imageCrop_w__3wDdG",h:"imageCrop_h__2SQGo",cross:"imageCrop_cross__3E83l",moveBox:"imageCrop_moveBox__1ARXf",line:"imageCrop_line__3pgnf",n:"imageCrop_n__SHC68",e:"imageCrop_e__2jt7w",s:"imageCrop_s__1S21u",point:"imageCrop_point__1sRRv",nw:"imageCrop_nw__nccC3",ne:"imageCrop_ne__2r6NJ",se:"imageCrop_se__1HLvC",sw:"imageCrop_sw__1Y9E7",cropBoxInfo:"imageCrop_cropBoxInfo__3dM_C",btn:"imageCrop_btn__2xzdA",btnChoice:"imageCrop_btnChoice__1un7P"}},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);function o(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[774,888,179],(function(){return t=5656,e(e.s=t);var t}));var t=e.O();_N_E=t}]);